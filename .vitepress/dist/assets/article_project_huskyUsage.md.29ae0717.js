import{_ as s,o as a,c as t,U as n}from"./chunks/framework.9adb0f96.js";const y=JSON.parse('{"title":"","description":"","frontmatter":{},"headers":[],"relativePath":"article/project/huskyUsage.md","filePath":"article/project/huskyUsage.md","lastUpdated":1714997162000}'),l={name:"article/project/huskyUsage.md"},e=n(`<h2 id="husky-v6-0-前" tabindex="-1">husky V6.0 前 <a class="header-anchor" href="#husky-v6-0-前" aria-label="Permalink to &quot;husky V6.0 前&quot;">​</a></h2><ol><li>添加依赖</li></ol><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">npm install -D husky</span></span></code></pre></div><ol start="2"><li>配置 git hooks { &quot;husky&quot;: { &quot;hooks&quot;: { &quot;pre-commit&quot;: &quot;npm run test&quot;, // 在commit之前先执行npm run test命令 &quot;commit-msg&quot;: &quot;commitlint -e $HUSKY_GIT_PARAMS&quot; // 校验commit时添加的备注信息是否符合我们要求的规范 } } }</li></ol><h2 id="husky-v6-0-后" tabindex="-1">husky V6.0 后 <a class="header-anchor" href="#husky-v6-0-后" aria-label="Permalink to &quot;husky V6.0 后&quot;">​</a></h2><ol><li>添加依赖</li></ol><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">npm install -D husky</span></span></code></pre></div><ol start="2"><li>在package.json 中添加 prepare 脚本</li></ol><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  &quot;scripts&quot;: {</span></span>
<span class="line"><span style="color:#A6ACCD;">    &quot;prepare&quot;: &quot;husky install&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;">  }</span></span>
<span class="line"><span style="color:#A6ACCD;">}</span></span></code></pre></div><p>prepare脚本会在npm install（不带参数）之后自动执行。也就是说当我们执行npm install安装完项目依赖后会执行 husky install命令，该命令会创建.husky/目录并指定该目录为git hooks所在的目录。</p><ol start="3"><li>添加钩子</li></ol><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">// 暂存区钩子</span></span>
<span class="line"><span style="color:#A6ACCD;">npx husky add .husky/pre-commit &#39;npx lint-staged&#39;</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span>
<span class="line"><span style="color:#A6ACCD;">// 存储区钩子</span></span>
<span class="line"><span style="color:#A6ACCD;">npx husky add .husky/commit-msg  &#39;npx --no -- commitlint --edit \${1}&#39;</span></span></code></pre></div>`,12),o=[e];function p(i,c,r,u,h,d){return a(),t("div",null,o)}const k=s(l,[["render",p]]);export{y as __pageData,k as default};
